---
title: Sizzle
date: 2017-03-18 10:29:38
tags: [Sizzle]
---

 纯JS实现的CSS选择器引擎。可以单独使用。
<!--more-->

# Sizzle
    浏览器支持querySelectorAll(),调用该方法，不支持，模拟该方法的行为。

## 源码架构
todo
## 选择器表达式
- 块表达式
    - 简单表达式 ID CLASS TAG
    - 属性表达式 ATTR
    - 伪类表达式 PSEUDO
        - 位置伪类
        - 子元素伪类
        - 内容伪类
        - 可见伪类
        - 表单伪类
- 块间表达式
    - > 父子关系
    - "" 祖先后台管理
    - "+" 紧挨着的兄弟元素
    - "~" 之后的所有兄弟元素
##  核心步骤
1. 处理选择器表达式： 
    解析选择器表达式中的块表达式和块间关系符。
2. 处理块表达式：
    用块表达式的一部分查找，用剩余部分对查找结果进行过滤
3. 处理块间关系符：
    按照块间关系付符查找，用快表达式对查找结果进行过滤。
重点：
从左向右的总体思路是不断缩小上下文，即不断缩小查找范围。
从右向左的总体思路是先查找后过滤。
大多数情况下，从右向左比从左向右效率高。

## 核心接口
- chunker() 
- .find()
- .filter()
- .selector.relative()
